"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass,V;Object.defineProperty(exports,"__esModule",{value:!0}),_createClass=function(){function a(a,b){var c,d;for(c=0;c<b.length;c++)d=b[c],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),V=function(){function a(){_classCallCheck(this,a),this._cfg={nonvoid:function(a,b){return b?a.trim()?0:["nonvoid"]:0},reg:function(a,b){return b.test(a)?0:["reg"]},limit:function(a,b){return+a>=b[0]&&+a<=b[1]?0:["limit"]},equal:function(a,b){return a==b?0:["equal"]},unequal:function(a,b){return a!=b?0:["unequal"]}},this._regList={ImgCode:/^[0-9a-zA-Z]{4}$/,SmsCode:/^\d{4}$/,MailCode:/^\d{4}$/,UserName:/^[\w|\d]{4,16}$/,Password:/^[\w!@#$%^&*.]{6,16}$/,Mobile:/^1[3|5|8]\d{9}$/,RealName:/^[\u4e00-\u9fa5 ]{2,10}$/,BankNum:/^\d{10,19}$/,Money:/^([1-9]\d*|0)$/,Answer:/^\S+$/,Mail:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/},this._ERR_MSG={nonvoid:"该项要求不能为空值",reg:"格式错误",limit:"您输入的值不在区间内",equal:"两次输入的值不相等",unequal:"两次输入的值重复"}}return _createClass(a,[{key:"install",value:function(a){var b=this;a.directive("cddv-input",{bind:function(a,b,c){var d=0,e={value:b.value||"",arg:b.arg||""},f=c.context,g=f._cddv;a._cddv||(a._cddv={dirty:!1,v_type:e.arg,indeed_value:e.value.format,validated:!1,msg:"未进行验证",title:e.value.title}),g.forms[e.value.id]||(g.forms[e.value.id]=a),a.onchange=function(){a._cddv.dirty||(a._cddv.dirty=!0),d=g.check(e,a,f),g.msg(e,a,d),f.$emit("cddv-checked")}}}),a.directive("cddv-msg",{bind:function(a,b,c){var d,e={arg:b.arg},f=c.context;a.style.display="none",d=f._cddv.forms[e.arg],f.$on("cddv-checked",function(){d._cddv.validated?a.style.display="none":!d._cddv.validated&&d._cddv.dirty&&(a.style.display="block",a.innerHTML=d._cddv.msg)})}}),a.directive("cddv-final-check",{bind:function(a,b,c){var d={arg:b.arg||"",value:b.value||""},e=c.context;e.$on("cddv-checked",function(){var b,c,f=!0;if(d.value.keys)f=d.value.keys.every(function(a){return e._cddv.forms[a]._cddv.validated});else{console.log(e._cddv.forms);for(b in e._cddv.forms)if("undefined"!=b&&!e._cddv.forms[b]._cddv.validated){f=!1;break}}c=a.className.split(" "),f?(c.pop(),a.className=c.join(" "),a.onclick=d.arg?e[d.arg]:d.value.method):(a.onclick=function(){},-1==c.indexOf("submit-check-failed")&&c.push("submit-check-failed"),a.className=c.join(" "))})}}),a.prototype._cddv={forms:{},check:function(a,c,d){"reg"==a.arg&&b._regList[a.value.format]&&(a.value.format=b._regList[a.value.format]);var e="";return e=a.value.aim?d._cddv.forms[a.value.aim].value||d.$data[a.value.aim]:d.$data[a.value.format]||a.value.format,b.cfg[a.arg](c.value,e)},msg:function(a,c,d){var e="";switch(d[0]){case"nonvoid":e="["+a.value.title+"]",c._cddv.validated=!1,c._cddv.msg=e+b._ERR_MSG[d];break;case"reg":e="["+a.value.title+"]格式错误",c._cddv.validated=!1,c._cddv.msg=e;break;case"limit":e=+c.value<a.value.format[0]?"["+a.value.title+"]应该大于"+a.value.format[0]:"["+a.value.title+"]应该小于"+a.value.format[1],c._cddv.validated=!1,c._cddv.msg=b._ERR_MSG[d]+e;break;case"equal":e="["+a.value.title+"]",c._cddv.validated=!1,c._cddv.msg=e+b._ERR_MSG[d];break;case"unequal":e="["+a.value.title+"]",c._cddv.validated=!1,c._cddv.msg=e+b._ERR_MSG[d];break;default:c._cddv.validated=!0,c._cddv.msg="["+a.value.title+"]验证通过"}},value:function(){return this}}}},{key:"ERR_MSG",get:function(){return this._ERR_MSG}},{key:"cfg",get:function(){return this._cfg}},{key:"regList",get:function(){return this._regList}}]),a}(),exports.default=new V;